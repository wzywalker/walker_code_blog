<!DOCTYPE HTML>
<html lang="english">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Maverick,AlanDecode,Galileo,blog" />
    <meta name="generator" content="Maverick 1.2.1" />
    <meta name="template" content="Prism" />
    <link rel="alternate" type="application/rss+xml" title="walker's code blog &raquo; RSS 2.0" href="/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="walker's code blog &raquo; ATOM 1.0" href="/feed/atom/index.xml" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-b9d78ff38a.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-182e5a8869.css">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <script>
        var ExSearchConfig = {
            root: "",
            api: "https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/6b7f0246dda0561db2c2d159344cad05.json"
        }

    </script>
    
<title>walker's code blog</title>
<meta name="author" content="walker" />
<meta name="description" content="coder, reader" />
<meta property="og:title" content="walker's code blog" />
<meta property="og:description" content="coder, reader" />
<meta property="og:site_name" content="walker's code blog" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/page/9/" />
<meta property="og:image" content="walker's code blog" />
<meta name="twitter:title" content="walker's code blog" />
<meta name="twitter:description" content="coder, reader" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/android-chrome-512x512.png" />


    
</head>

<body>
    <div class="container prism-container">
        <header class="prism-header" id="prism__header">
            <h1 class="text-uppercase brand"><a class="no-link" href="/" target="_self">walker's code blog</a></h1>
            <p>coder, reader</p>
            <nav class="prism-nav"><ul><li><a class="no-link text-uppercase " href="/" target="_self">Home</a></li><li><a class="no-link text-uppercase " href="/archives/" target="_self">Archives</a></li><li><a class="no-link text-uppercase " href="/about/" target="_self">About</a></li><li><a href="#" target="_self" class="search-form-input no-link text-uppercase">Search</a></li></ul></nav>
        </header>
        <div class="prism-wrapper" id="prism__wrapper">
            
<main>    
    

<section id="prism__post-list" class="prism-section row">
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/%E5%A4%87%E4%BB%BD%E7%AF%87%E7%BB%98%E5%88%B6%E8%81%8A%E5%A4%A9%E6%B0%94%E6%B3%A1%E7%9A%84%E6%96%87%E7%AB%A0/" target="_self">备份篇绘制聊天气泡的文章</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/%E5%A4%87%E4%BB%BD%E7%AF%87%E7%BB%98%E5%88%B6%E8%81%8A%E5%A4%A9%E6%B0%94%E6%B3%A1%E7%9A%84%E6%96%87%E7%AB%A0/" target="_self">
                <time class="text-uppercase">
                    September 06 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><p>记记思路</p><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">drawRect:</span><span class="p">(</span><span class="n">CGRect</span><span class="p">)</span><span class="nv">rect</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">CGContextRef</span><span class="w"> </span><span class="n">context</span><span class="o">=</span><span class="n">UIGraphicsGetCurrentContext</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">CGContextSetLineWidth</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="mf">.5f</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">CGContextSetStrokeColorWithColor</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="bp">UIColor</span><span class="w"> </span><span class="n">lightGrayColor</span><span class="p">].</span><span class="n">CGColor</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">CGContextSetRGBFillColor</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">rect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">CGFloat</span><span class="w"> </span><span class="n">radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cornerRadius</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">CGFloat</span><span class="w"> </span><span class="n">minx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGRectGetMinX</span><span class="p">(</span><span class="n">rect</span><span class="p">),</span><span class="w"> </span><span class="n">midx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGRectGetMidX</span><span class="p">(</span><span class="n">rect</span><span class="p">),</span><span class="w"> </span><span class="n">maxx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGRectGetMaxX</span><span class="p">(</span><span class="n">rect</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">CGFloat</span><span class="w"> </span><span class="n">miny</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGRectGetMinY</span><span class="p">(</span><span class="n">rect</span><span class="p">),</span><span class="w"> </span><span class="n">midy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGRectGetMidY</span><span class="p">(</span><span class="n">rect</span><span class="p">),</span><span class="w"> </span><span class="n">maxy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGRectGetMaxY</span><span class="p">(</span><span class="n">rect</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">CGMutablePathRef</span><span class="w"> </span><span class="n">outlinePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGPathCreateMutable</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">[</span><span class="n">User</span><span class="w"> </span><span class="n">isCurrentUser</span><span class="o">:</span><span class="n">message</span><span class="p">.</span><span class="n">user</span><span class="p">])</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">minx</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="n">CGPathMoveToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">midx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddArcToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">maxx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="p">,</span><span class="w"> </span><span class="n">maxx</span><span class="p">,</span><span class="w"> </span><span class="n">midy</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddArcToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">maxx</span><span class="p">,</span><span class="w"> </span><span class="n">maxy</span><span class="p">,</span><span class="w"> </span><span class="n">midx</span><span class="p">,</span><span class="w"> </span><span class="n">maxy</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddArcToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">minx</span><span class="p">,</span><span class="w"> </span><span class="n">maxy</span><span class="p">,</span><span class="w"> </span><span class="n">minx</span><span class="p">,</span><span class="w"> </span><span class="n">midy</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddLineToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">minx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">20</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddLineToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">minx</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">15</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddLineToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">minx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddArcToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">minx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="p">,</span><span class="w"> </span><span class="n">midx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathCloseSubpath</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">CGContextSetShadowWithColor</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">CGSizeMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="bp">UIColor</span><span class="w"> </span><span class="n">lightGrayColor</span><span class="p">].</span><span class="n">CGColor</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGContextAddPath</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">outlinePath</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGContextFillPath</span><span class="p">(</span><span class="n">context</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">CGContextAddPath</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">outlinePath</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGContextClip</span><span class="p">(</span><span class="n">context</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPoint</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGPointMake</span><span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">rect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPoint</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGPointMake</span><span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">rect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGContextDrawLinearGradient</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nb">self</span><span class="w"> </span><span class="n">normalGradient</span><span class="p">],</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">maxx</span><span class="o">-=</span><span class="mi">5</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathMoveToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">midx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddArcToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">minx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="p">,</span><span class="w"> </span><span class="n">minx</span><span class="p">,</span><span class="w"> </span><span class="n">midy</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddArcToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">minx</span><span class="p">,</span><span class="w"> </span><span class="n">maxy</span><span class="p">,</span><span class="w"> </span><span class="n">midx</span><span class="p">,</span><span class="w"> </span><span class="n">maxy</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddArcToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">maxx</span><span class="p">,</span><span class="w"> </span><span class="n">maxy</span><span class="p">,</span><span class="w"> </span><span class="n">maxx</span><span class="p">,</span><span class="w"> </span><span class="n">midy</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddLineToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">maxx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">20</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddLineToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">maxx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">15</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddLineToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">maxx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathAddArcToPoint</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">,</span><span class="w"> </span><span class="n">maxx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="p">,</span><span class="w"> </span><span class="n">midx</span><span class="p">,</span><span class="w"> </span><span class="n">miny</span><span class="p">,</span><span class="w"> </span><span class="n">radius</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPathCloseSubpath</span><span class="p">(</span><span class="n">outlinePath</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">CGContextSetShadowWithColor</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">CGSizeMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="bp">UIColor</span><span class="w"> </span><span class="n">lightGrayColor</span><span class="p">].</span><span class="n">CGColor</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGContextAddPath</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">outlinePath</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGContextFillPath</span><span class="p">(</span><span class="n">context</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">CGContextAddPath</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">outlinePath</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGContextClip</span><span class="p">(</span><span class="n">context</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPoint</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGPointMake</span><span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">rect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGPoint</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGPointMake</span><span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">rect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">CGContextDrawLinearGradient</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="nb">self</span><span class="w"> </span><span class="n">greenGradient</span><span class="p">],</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>


<span class="w">    </span><span class="n">CGContextDrawPath</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">kCGPathFillStroke</span><span class="p">);</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>

<span class="p">-</span> <span class="p">(</span><span class="n">CGGradientRef</span><span class="p">)</span><span class="nf">normalGradient</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="bp">NSMutableArray</span><span class="w"> </span><span class="o">*</span><span class="n">normalGradientLocations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSMutableArray</span><span class="w"> </span><span class="n">arrayWithObjects</span><span class="o">:</span><span class="w"></span>
<span class="w">                                               </span><span class="p">[</span><span class="bp">NSNumber</span><span class="w"> </span><span class="n">numberWithFloat</span><span class="o">:</span><span class="mf">0.0f</span><span class="p">],</span><span class="w"></span>
<span class="w">                                               </span><span class="p">[</span><span class="bp">NSNumber</span><span class="w"> </span><span class="n">numberWithFloat</span><span class="o">:</span><span class="mf">1.0f</span><span class="p">],</span><span class="w"></span>
<span class="w">                                               </span><span class="nb">nil</span><span class="p">];</span><span class="w"></span>


<span class="w">    </span><span class="bp">NSMutableArray</span><span class="w"> </span><span class="o">*</span><span class="n">colors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSMutableArray</span><span class="w"> </span><span class="n">arrayWithCapacity</span><span class="o">:</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>

<span class="w">    </span><span class="bp">UIColor</span><span class="w"> </span><span class="o">*</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">UIColor</span><span class="w"> </span><span class="n">whiteColor</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="n">colors</span><span class="w"> </span><span class="n">addObject</span><span class="o">:</span><span class="p">(</span><span class="kt">id</span><span class="p">)[</span><span class="n">color</span><span class="w"> </span><span class="n">CGColor</span><span class="p">]];</span><span class="w"></span>
<span class="w">    </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">StyleView</span><span class="w"> </span><span class="n">lightColorFromColor</span><span class="o">:</span><span class="p">[</span><span class="bp">UIColor</span><span class="w"> </span><span class="n">cloudsColor</span><span class="p">]];</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="n">colors</span><span class="w"> </span><span class="n">addObject</span><span class="o">:</span><span class="p">(</span><span class="kt">id</span><span class="p">)[</span><span class="n">color</span><span class="w"> </span><span class="n">CGColor</span><span class="p">]];</span><span class="w"></span>
<span class="w">    </span><span class="bp">NSMutableArray</span><span class="w">  </span><span class="o">*</span><span class="n">normalGradientColors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colors</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">locCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">normalGradientLocations</span><span class="w"> </span><span class="n">count</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="n">CGFloat</span><span class="w"> </span><span class="n">locations</span><span class="p">[</span><span class="n">locCount</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">[</span><span class="n">normalGradientLocations</span><span class="w"> </span><span class="n">count</span><span class="p">];</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="bp">NSNumber</span><span class="w"> </span><span class="o">*</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">normalGradientLocations</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<span class="w">        </span><span class="n">locations</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">location</span><span class="w"> </span><span class="n">floatValue</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">CGColorSpaceRef</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGColorSpaceCreateDeviceRGB</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="n">CGGradientRef</span><span class="w"> </span><span class="n">normalGradient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGGradientCreateWithColors</span><span class="p">(</span><span class="n">space</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="k">__bridge</span><span class="w"> </span><span class="n">CFArrayRef</span><span class="p">)</span><span class="n">normalGradientColors</span><span class="p">,</span><span class="w"> </span><span class="n">locations</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">CGColorSpaceRelease</span><span class="p">(</span><span class="n">space</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">normalGradient</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
<p>效果
<figure  style="flex: 93.841642228739" ><img width="640" height="341" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/4d8b42255239c728170682586ed2f78c.png" alt=""/></figure></p><p>来源<a href="http://stackoverflow.com/questions/11196112/speech-bubble-in-ios-sdk-using-objective-c">StackOverflow</a></p></div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/%E5%A4%87%E4%BB%BD%E7%AF%87%E7%BB%98%E5%88%B6%E8%81%8A%E5%A4%A9%E6%B0%94%E6%B3%A1%E7%9A%84%E6%96%87%E7%AB%A0/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/UIImage%E8%BD%ACNSData%E6%9C%89%E6%97%B6%E4%B8%BAnil/" target="_self">UIImage转NSData有时为nil</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/UIImage%E8%BD%ACNSData%E6%9C%89%E6%97%B6%E4%B8%BAnil/" target="_self">
                <time class="text-uppercase">
                    July 14 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><p>一般, 我们会用<code>UIImagePNGRepresentation</code>, <code>UIImagePNGRepresentation</code>来达到目的, 但有时候, 发现它的返回值为<code>nil</code>...</p><p>不需要怀疑这么简单处理有什么问题, <a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/#//apple_ref/c/func/UIImagePNGRepresentation">文档</a> 就是如此:</p><blockquote>
<p><strong>Return Value</strong></p><p>A data object containing the PNG data, or nil if there was a problem generating the data. <strong>This function may return nil if the image has no data</strong> or if the underlying CGImageRef contains data in an unsupported bitmap format.</p></blockquote>
<p>也就是说, 没有<code>data</code>的情况还是挺多的, 我们还是放弃这个方法吧, 换别的吧, 提供三种思路</p><h2>复制一张图片</h2>
<div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nv">imageName</span><span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="s">&quot;MyImageName.png&quot;</span>
<span class="kd">var</span> <span class="nv">image</span> <span class="p">=</span> <span class="bp">UIImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="n">imageName</span><span class="p">)</span>
<span class="kd">var</span> <span class="nv">rep</span> <span class="p">=</span> <span class="n">UIImagePNGRepresentation</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</pre></div>
<p>当然, 这不能保证什么</p><h2>重绘一张图片</h2>
<div class="highlight"><pre><span></span><span class="n">UIGraphicsBeginImageContext</span><span class="p">(</span><span class="n">originalImage</span><span class="p">.</span><span class="n">size</span><span class="p">);</span><span class="w"></span>
<span class="p">[</span><span class="n">originalImage</span><span class="w"> </span><span class="n">drawInRect</span><span class="o">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">originalImage</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">originalImage</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">)];</span><span class="w"></span>
<span class="bp">UIImage</span><span class="w"> </span><span class="o">*</span><span class="n">newImage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UIGraphicsGetImageFromCurrentImageContext</span><span class="p">();</span><span class="w"></span>
<span class="n">UIGraphicsEndImageContext</span><span class="p">();</span><span class="w"></span>
</pre></div>
<p>或</p><div class="highlight"><pre><span></span><span class="n">UIGraphicsBeginImageContext</span><span class="p">(</span><span class="n">CGSizeMake</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="kd">let</span> <span class="nv">image</span> <span class="p">=</span> <span class="n">UIGraphicsGetImageFromCurrentImageContext</span><span class="p">()</span>
<span class="n">UIGraphicsEndImageContext</span><span class="p">()</span>
</pre></div>
<h2>不用 UIImage</h2>
<p>1和2都没验证过, 但都是在StackOverflow上别人贴出的答案, 我之所以不验证了, 因为我是这么做的</p><div class="highlight"><pre><span></span><span class="n">CGDataProviderRef</span><span class="w"> </span><span class="n">provider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CGImageGetDataProvider</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">CGImage</span><span class="p">);</span><span class="w"></span>
<span class="bp">NSData</span><span class="o">*</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">CFBridgingRelease</span><span class="p">(</span><span class="n">CGDataProviderCopyData</span><span class="p">(</span><span class="n">provider</span><span class="p">));</span><span class="w"></span>
</pre></div>
<p>通了就没动力继续试啦, 而且本身已经很简洁了, 此外方法名也非常直白&quot;<code>DataProvider</code>&quot;, 还想怎样!</p></div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/UIImage%E8%BD%ACNSData%E6%9C%89%E6%97%B6%E4%B8%BAnil/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/%E7%90%86%E8%A7%A3__bridge/" target="_self">理解__bridge</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/%E7%90%86%E8%A7%A3__bridge/" target="_self">
                <time class="text-uppercase">
                    June 14 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><p>比较受用, 全文转载, <a href="https://abson.github.io/2016/08/19/Object-C-%E7%90%86%E8%A7%A3%E6%A1%A5%E6%8E%A5/">原文点此</a></p><p>##为什么使用要使用 Object-C++</p><p>在 iOS 开发当中，难免会使用到 OC 跟 C++混编的情况，一是为了程序对负责计算性能的提高，二是因为某些三方开源库是用 C++ 来写的，这两个原因也是让我下决心学好 C++ 的因素，毕竟开源才是王道，一直只写着 OC 却不能窥其究竟，确实难受，让只能让人停留在门外，坐井观天。</p><p>##什么是桥接 ？</p><p>桥接，是 object-c 在 ARC 环境下开发出来的一种用作转换 C 指针跟 OC 类指针的一种转换技术。
当然，这种技术在 MRC 中是不存在的，也就是桥接是 ARC 的连带产物，因为 ARC 就是解放了我们程序员的双手，当然对内存的概念又淡化了，所以在 ARC 未被业界接受之前多少也是因为这个桥接让人们感觉恶心。</p><p>##桥接用到的3个方法：</p><blockquote>
<p>(__bridge &lt;#type#&gt;)&lt;#expression#&gt;</p></blockquote>
<p>(__bridge_retained &lt;#CF type#&gt;)&lt;#expression#&gt;
(__bridge_transfer &lt;#Objective-C type#&gt;)&lt;#expression#&gt;)</p><p>##桥接方法的用途：</p><p>__bridge ：用作于普通的 C 指针与 OC 指针的转换，不做任何操作。</p>
<pre><code>void *p;
NSObject *objc = [[NSObject alloc] init];
p = (__bridge void*)objc;
</code></pre>
<p>这里的 void *p 指针直接指向了 NSObject *objc 这个 OC 类，p 指针并不拥有 OC 对象，跟普通的指针指向地址无疑。所以这个出现了一个问题，OC 对象被释放，p 指针也就 Gameover 了。</p><p>__bridge_retained：用作 C 指针与 OC 指针的转换，并且也用拥有着被转换对象的所有权</p><p>那么这个是什么意思呢？可以先看下面展示代码</p>
<pre><code>@interface ABSClass : NSObject
@property (nonatomic, copy) NSString *name;
@end
@implementation ABSClass
@end
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        void *p;
        {
            ABSClass *objc = [[ABSClass alloc]init];
            objc.name = @&quot;我们&quot;;
            p = (__bridge void*)objc;
        }
        NSLog(@&quot;%@&quot;, [(__bridge ABSClass *)p name]);
    }
    return 0;
}
</code></pre>
<p>这段代码看上去大体与上面一段一样，但是我们添加了一个作用域 {} ， 在作用域中创建 ABSClass *objc 这个对象，然后用作用域外的 p，指针进行桥接(__bridge)指向，然后输出 <code>ABSClass objc这个对象的name属性的值，按道理来说我们会看到控制台上输出我们这两个字。 但是，当我们一运行程序，毫无疑问，程序很崩溃在NSLog(@”%@”, [(__bridge ABSClass )p name]);这句代码中。 有点基础的小伙伴都知道，当ABSClass objc这个对象出了作用域范围，内存就会被回收，但是我们在作用域范围外还用void p去访问objc</code> 的内存，当然会崩溃啦。
那么，我们尝试修改为以下代码</p>
<pre><code>@interface ABSClass : NSObject
@property (nonatomic, copy) NSString *name;
@end
@implementation ABSClass
@end
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        void *p;
        {
            ABSClass *objc = [[ABSClass alloc]init];
            objc.name = @&quot;我们&quot;;
            p = (__bridge_retained void*)objc;
        }
        NSLog(@&quot;%@&quot;, [(__bridge ABSClass *)p name]);
    }
    return 0;
}
</code></pre>
<p>程序正常运行，因为我们使用了 __bridge_retained 就相当于 MRC 下的 retain ，将内存计数器 +1，然后用 void *p 指向改内存，所以当 *objc过了作用域，引用计算器 -1，也并没有释放 void *p 所引用的内存。</p><p>__bridge_transfer：用作 C 指针与 OC 指针的转换，并在拥有对象所有权后将原先对象所有权释放。(只支持 C 指针转换 OC 对象指针)</p><p>说起来相当绕口，其实可以理解为先将对象的引用计数器 +1，然后再将引用计数器 -1。
通过以下代码展现：</p>
<pre><code>@interface ABSClass : NSObject
@property (nonatomic, copy) NSString *name;
@end
@implementation ABSClass
@end
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        void *p;
        @autoreleasepool {
            ABSClass *obj = [[ABSClass alloc] init];
            obj.name = @&quot;我们&quot;;
            p = (__bridge_retained void *)obj;
        }
        id obj = (__bridge_transfer id)p;
        NSLog(@&quot;%@&quot;, [(__bridge ABSClass *)p name]);
        NSLog(@&quot;%@&quot;, [(ABSClass *)obj name]);
        NSLog(@&quot;Hello, World!&quot;);
    }
    return 0;
}
</code></pre>
<p>以上代码可以正确运行，在我们将 void *p 指针转换为进行 __bridge_transfer 为 OC 指针，这个操作其实相当于 - (void)set: 操作，转换为 MRC 为如下代码 :</p>
<pre><code>id obj = (id)p
[obj retain];
[(id)p release];
</code></pre>
<p>我们先将新值 retain，然后再将旧值 release，这样是为了保证引用计数器始终为1，一个 retain 对应一个 release。</p><p>好了，以上做法就是 C/C++ 指针与 OC 对象指针的相互转换介绍，希望能帮助更多的小伙伴理解。</p></div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/%E7%90%86%E8%A7%A3__bridge/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/Xcode%E8%87%AA%E5%A2%9Ebuild%E5%8F%B7/" target="_self">Xcode自增build号</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/Xcode%E8%87%AA%E5%A2%9Ebuild%E5%8F%B7/" target="_self">
                <time class="text-uppercase">
                    March 22 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><p>脚本:</p><div class="highlight"><pre><span></span><span class="nv">buildNumber</span><span class="o">=</span><span class="k">$(</span>/usr/libexec/PlistBuddy -c <span class="s2">&quot;Print CFBundleVersion&quot;</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_DIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">INFOPLIST_FILE</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span>  
<span class="nv">buildNumber</span><span class="o">=</span><span class="k">$((</span><span class="nv">$buildNumber</span> <span class="o">+</span> <span class="m">1</span><span class="k">))</span>  
/usr/libexec/PlistBuddy -c <span class="s2">&quot;Set :CFBundleVersion </span><span class="nv">$buildNumber</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_DIR</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">INFOPLIST_FILE</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
<p>To use this script, follow these steps:</p><ol>
<li>Select your app target in the project overview.</li>
<li>Select <strong>Build Phases</strong>.</li>
<li>Add a new build phase (&quot;<strong>New Run Script Phase</strong>&quot;).</li>
<li>Enter the above script in the appropriate field.</li>
<li>In your <code>Info.plist</code>, ensure the current build number is numeric (是的, 主要是保证你原来填写的确实是数字就行了)</li>
</ol>
<figure  style="flex: 128.73900293255133" ><img width="878" height="341" src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/archives/assets/570876b958f1bb0eba6fe0aea0ec353c.png" alt=""/></figure><p>来源: <a href="http://crunchybagel.com/auto-incrementing-build-numbers-in-xcode/">http://crunchybagel.com/auto-incrementing-build-numbers-in-xcode/</a></p><p>或者一些别的思考: 
<a href="http://stackoverflow.com/questions/9258344/better-way-of-incrementing-build-number">http://stackoverflow.com/questions/9258344/better-way-of-incrementing-build-number</a></p></div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/Xcode%E8%87%AA%E5%A2%9Ebuild%E5%8F%B7/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/UIMenuController%E7%9A%84%E4%BD%BF%E7%94%A8/" target="_self">UIMenuController的使用</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/UIMenuController%E7%9A%84%E4%BD%BF%E7%94%A8/" target="_self">
                <time class="text-uppercase">
                    March 21 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><p>#1, 基本使用
以对一个UILabel长按弹出菜单为例
##子类化UILabel
因为需要覆盖这几个方法:
<code>- (BOOL)canBecomeFirstResponder</code>; 返回YES 
同时需要在每次UI元素出现的时候去<code>becomeFirstResponder</code>一次,才能显示出菜单. 在我的实测中, 我在<code>ViewDidLoad</code>里面这么做了, 当UI导航到别的页面(导航控件, 或modal页面), 然后回来, 菜单又失效了, 所以我写到<code>ViewWillAppear</code>里面去了, 通过</p><p><code>- (BOOL)canPerformAction:(SEL)action withSender:(nullable id)sender</code>;
这个方法会在每一个menuItem生成的时候调用一次, 因此在方法体里就要根据action来判断是否需要显示在菜单里, 如果不需要, 则返回<code>NO</code>. 也就是说, 如果你什么都不做, 直接返一个<code>YES</code>, 那么所有的默认菜单项都会显示出来, 此处我们只要一个<code>Copy</code>选项吧:</p>
<pre><code>- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    return (action == @selector(copy:));
}
</code></pre>
<p>##添加触发方式
如果是以长按为触发, 则添加长按手势, 代码片段如下:</p>
<pre><code>// 在awakeFromNib里面添加即可
UILongPressGestureRecognizer *menuGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(menu:)];
    menuGesture.minimumPressDuration = 0.2;
    [self addGestureRecognizer:menuGesture];

- (void)menu:(UILongPressGestureRecognizer *)sender {
    if (sender.state == UIGestureRecognizerStateBegan) {
        UIMenuController *menu = [UIMenuController sharedMenuController];
        [menu setTargetRect:self.frame inView:self.superView]; // 把谁的位置告诉控制器, 菜单就会以其为基准在合适的位置出现
        [menu setMenuVisible:YES animated:YES];
    }
}
</code></pre>
<p>##编写菜单行为
上面我们只要了copy, 那么就覆盖默认的copy方法:</p>
<pre><code>- (void)copy:(id)sender {
    UIPasteboard *paste = [UIPasteboard generalPasteboard];
    paste.string = self.text;
}
</code></pre>
<p>#2, 添加自定义菜单项
自定义菜单只需要在菜单控制器添加几个item即可, 结合上例, 我的那个label是显示电话号码的, 那么就让它多显示一个”打电话”和一个”发短信”菜单吧, 唯一需要注意的是, 在设置自定义菜单项时, 设置的items只影响自定义部分, 标准菜单项仍然是由<code>canPerformAction</code>决定的:</p>
<pre><code>UIMenuItem *itemCall = [[UIMenuItem alloc] initWithTitle:@&quot;Call&quot; action:@selector(call:)];
UIMenuItem *itemMessage = [[UIMenuItem alloc] initWithTitle:@&quot;Message&quot; action:@selector(message:)];
[[UIMenuController sharedMenuController] setMenuItems: @[itemCall, itemMessage]];
[[UIMenuController sharedMenuController] update];
</code></pre>
<blockquote>
<p>注, 添加了两个菜单后, canPerformAction需要相应变化, 自己想想应该怎么改. 也可以在下一节看代码. 当然也要自行写完里面的call和message方法, 参照copy的写法即可</p></blockquote>
<p>#3, UITableViewCell长按显示菜单
##标准菜单项
UITableView里面长项条目显示标准菜单, 只需要实现下述代理方法即可:</p>
<pre><code>- (BOOL)tableView:(UITableView *)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (BOOL)tableView:(UITableView *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
    return (action == @selector(copy:)); // 只显示Copy
}

- (void)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender {
    if (action == @select(copy:)) {
        UIPasteboard *paste = [UIPasteboard generalPasteboard];
        paste.string = cell.detailLabel.text; // 自行写业务逻辑
    }
}
</code></pre>
<p>#4, TableViewCell添加自定义菜单项</p><p>同样也得子类化一个TableViewCell,目的也是为了覆盖同样的几个方法:</p>
<pre><code>- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    return (action == @selector(copy:) || action == @selector(call:) || action == @selector(message:)); // 此处我们把三个行为都写全了, 回答上一节的问题
}

- (BOOL)canBecomeFirstResponder {
    return YES;
}
</code></pre>
<p>但因为tableView已经实现了菜单, 所以不需要显式为每个cell去<code>becomeFirtResponder</code>了.</p><p>添加菜单项的方法同上, 写菜单行为的方法同<code>copy:</code>, 都是一样的.</p><blockquote>
<p>注: 你们或许已经发现了, 添加自定义菜单项的时候, 仍然需要<code>canPerformAction</code>, 在这里, 与tableView代理里面的同名方法有什么关系? 是的, 两个都要写, tableView里面的只会影响标准菜单, 文档说只支持这两个<code>UIResponderStandardEditActions</code> (copy/paste)</p></blockquote>
<blockquote>
<p>注: 然而, <code>- (void)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender</code>这个方法却有点别扭, 一来不需要去实现了, 二来又不能注释掉(你们自己试一下), 等于一定要留一个空的方法体在那里…</p></blockquote>
</div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/UIMenuController%E7%9A%84%E4%BD%BF%E7%94%A8/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/OC%E9%9D%99%E6%80%81%E5%BA%93%E9%87%8CNSClassFromString%E5%BE%97%E5%88%B0nil%E7%9A%84%E8%A7%A3%E5%86%B3/" target="_self">OC静态库里NSClassFromString得到nil的解决</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/OC%E9%9D%99%E6%80%81%E5%BA%93%E9%87%8CNSClassFromString%E5%BE%97%E5%88%B0nil%E7%9A%84%E8%A7%A3%E5%86%B3/" target="_self">
                <time class="text-uppercase">
                    March 15 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><p>如果你在静态库中有从类名反射回类的代码, 如下:</p>
<pre><code>NSString *myClassStr = @&quot;myClass&quot;;  
Class myClazz = NSClassFromString(myClassStr);  
if (myClazz) {  
    id myClassInit = [[myClazz alloc] init];  
}
</code></pre>
<p>有时候(经常)会出现得到了Class为nil的情况, 网上搜索, 一般是这么说的:</p><blockquote>
<p>The class object named by aClassName, or nil if no class by that name is currently loaded. If aClassName is nil, returns nil.</p></blockquote>
<p>来自于64位系统的一个bug:</p><blockquote>
<p>IMPORTANT: For 64-bit and iPhone OS applications, there is a linker bug that prevents -ObjC from loading objects files from static libraries that contain only categories and no classes. The workaround is to use the -all_load or -force_load flags. -all_load forces the linker to load all object files from every archive it sees, even those without Objective-C code. -force_load is available in Xcode 3.2 and later. It allows finer grain control of archive loading. Each -force_load option must be followed by a path to an archive, and every object file in that archive will be loaded.</p></blockquote>
<p>就我的实测</p><ul>
<li>首先, 你需要在你的主项目(的target)对<code>build setting</code>进行更改, 而<strong>不是</strong>静态库的项目!</li>
<li>其次, <code>-all_load</code>有效, <code>-force_load</code>甚至编译都过不了</li>
<li>最后, 结合上面, 就是在主项目(引用静态库的项目)的build setting里面搜索<code>other linker flags</code>, 然后把<code>-all_load</code>加进去就行了</li>
</ul>
</div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/OC%E9%9D%99%E6%80%81%E5%BA%93%E9%87%8CNSClassFromString%E5%BE%97%E5%88%B0nil%E7%9A%84%E8%A7%A3%E5%86%B3/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/%E9%80%9A%E8%BF%87GPS%E6%95%B0%E6%8D%AE%E5%8F%8D%E5%90%91%E5%9C%B0%E7%90%86%E4%BF%A1%E6%81%AF%E7%BC%96%E7%A0%81%E5%BE%97%E5%88%B0%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/" target="_self">通过GPS数据反向地理信息编码得到当前位置信息</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/%E9%80%9A%E8%BF%87GPS%E6%95%B0%E6%8D%AE%E5%8F%8D%E5%90%91%E5%9C%B0%E7%90%86%E4%BF%A1%E6%81%AF%E7%BC%96%E7%A0%81%E5%BE%97%E5%88%B0%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/" target="_self">
                <time class="text-uppercase">
                    January 14 2018
                </time>
            </a>
        </div>
        <div class="prism-content"><h1>检查可用性</h1>
<p>这属于基础知识, 不赘述, 总的来说,你的设备的支持要打开, 添加CoreLocation的framework, 引用头文件, 添加委托,然后, 好的实践是在使用前编程检查相关可用性:</p>
<pre><code>- (CLLocationManager *)locationManager
{
    if(!_locationManager){
        if([CLLocationManager locationServicesEnabled]){
            _locationManager = [[CLLocationManager alloc] init];
            _locationManager.delegate = self;
            _locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
            CLAuthorizationStatus status = [CLLocationManager authorizationStatus];
            if (status == kCLAuthorizationStatusNotDetermined) {
                NSLog(@&quot; not determined&quot;);
                if([_locationManager respondsToSelector:@selector(requestWhenInUseAuthorization)]){
                    [_locationManager requestAlwaysAuthorization];
                }
            }else if (status == kCLAuthorizationStatusDenied) {
                NSLog(@&quot;denied&quot;);
            }else if (status == kCLAuthorizationStatusRestricted) {
                NSLog(@&quot;restricted&quot;);
            }else if (status == kCLAuthorizationStatusAuthorizedAlways) {
                NSLog(@&quot;always allowed&quot;);
            }else if (status == kCLAuthorizationStatusAuthorizedWhenInUse) {
                NSLog(@&quot;when in use allowed&quot;);
            }else{
            }
        }else _locationManager = nil;
    }
    return _locationManager;
}
</code></pre>
<p>注意<code>kCLAuthorizationStatusNotDetermined</code>状态, iOS8以后, 需要手动编辑info.plist文件, 添加两个请求用户授权时的文案, 才能正常使用, 这里觉得匪夷所思:</p>
<pre><code>&lt;key&gt;NSLocationWhenInUseUsageDescription&lt;/key&gt;&lt;string&gt;请授权使用地理位置服务&lt;/string&gt;
&lt;key&gt;NSLocationAlwaysUsageDescription&lt;/key&gt;&lt;string&gt;请授权使用地理位置服务&lt;/string&gt;
</code></pre>
<p>以上, 可随便参考网上任何<a href="http://kittenyang.com/cllocationmanager/">一篇教程</a></p><h1>请求地理位置并反向编码</h1>
<p>这里需要注意的是, 苹果的<code>CLGeocoder</code> API并不允许你频繁调用, 一分钟一次为宜, 所以你千万不要<code>[self.locationManager startUpdatingLocation]</code>, 然后在<code>locationManager:didChangeAuthorizationStatus:</code>
方法里去decode, 因为只是为了获取城市, 精度要求不高, 并且不需要持续更新, 所以我们就不update了, 只request一次, 然后在获取位置失败的时候再手动request一次:</p>
<pre><code>+ (void)locationManager:(nonnull CLLocationManager *)manager didFailWithError:(nonnull NSError *)error{
    NSLog(@&quot;fail with error:\n %@&quot;, error);
    [self.locationManager requestLocation];
}
</code></pre>
<p>相关解释参考<a href="http://stackoverflow.com/questions/17867422/kclerrordomain-error-2-after-geocoding-repeatedly-with-clgeocoder">这篇文章</a></p><p>#语言的问题</p><p>因为习惯用英文系统, 就碰到请求回来的信息是英文的原因, 这里苹果是固化起来的, 暂时不支持用参数来指定返回数据的显示语言, 借鉴<a href="http://stackoverflow.com/questions/20388891/cllocationmanager-reversegeocodelocation-language">这篇文章</a>的思路, 在请求前把当前语言设置保存起来, 临时改成中文, 请求结束后再修改回来:</p>
<pre><code>+ (void)locationManager:(nonnull CLLocationManager *)manager didUpdateLocations:(nonnull NSArray *)locations{
    CLLocation *location = [locations lastObject];
    CLGeocoder *geocoder = [CLGeocoder new];
    // 修改语言为中文
    NSArray *currentLanguageArray = [[NSUserDefaults standardUserDefaults] objectForKey:@&quot;AppleLanguages&quot;];
    [[NSUserDefaults standardUserDefaults] setObject: [NSArray arrayWithObjects:@&quot;zh_Hans&quot;, nil] forKey:@&quot;AppleLanguages&quot;];
    [geocoder reverseGeocodeLocation:location completionHandler:^(NSArray&lt;CLPlacemark *&gt; * __nullable placemarks, NSError * __nullable error) {
        // 恢复语言
        [[NSUserDefaults standardUserDefaults] setObject:currentLanguageArray forKey:@&quot;AppleLanguages&quot;];
        if(error){
            NSLog(@&quot;reverse error:%@&quot;, [error localizedDescription]);
        }else{
            if([placemarks count] &gt; 0){
                CLPlacemark *mark = [placemarks firstObject];
                NSLog(@&quot;%@&quot;, mark);
                NSLog(@&quot;城市名:%@&quot;, mark.locality);
            }
        }
    }];
}
</code></pre>
</div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/%E9%80%9A%E8%BF%87GPS%E6%95%B0%E6%8D%AE%E5%8F%8D%E5%90%91%E5%9C%B0%E7%90%86%E4%BF%A1%E6%81%AF%E7%BC%96%E7%A0%81%E5%BE%97%E5%88%B0%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/%E6%88%91%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%A0%E4%B8%AAXcode%E5%BF%AB%E6%8D%B7%E9%94%AE/" target="_self">我最常用的几个Xcode快捷键</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/%E6%88%91%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%A0%E4%B8%AAXcode%E5%BF%AB%E6%8D%B7%E9%94%AE/" target="_self">
                <time class="text-uppercase">
                    March 16 2017
                </time>
            </a>
        </div>
        <div class="prism-content"><blockquote>
<p>⌘(command) ⏎(return) ⌥(option/alt) ⇧(shift) ⌃(control/ctrl)</p></blockquote>

<pre><code>快速打开文件 ⌘ + ⇧ + O(字母)
快速搜索文本 ⌘ + ⇧ + F
分栏显示 ⌘ + ⌥ + ⏎
退出分栏显示 ⌘ + ⏎
让文件在分栏的右侧显示 ⌥ + click
显示出浮层选择打开位置
导航中点击文件 ⇧ + ⌥ + click
编辑区域中点击文件名 ⇧ + ⌥ + ⌘ + click
隐藏/显示左侧导航区 ⌘ + 0(数字)
隐藏/显示右侧功能区 ⌘ + ⌥ + 0(数字)
隐藏/显示下方调试区 ⌘ + ⇧ + Y
打开/关闭自动补全 Esc
快速类/方法提示 ⌥ + click
自动缩进 ⌃ + I(字母i)
导航中标签页的选择 ⌘ + (1...6)
编辑区文件的选择 ⌃ + (1...5)
跳转到方法 ⌃ + 6
编译 ⌘ + B
编译并运行 ⌘ + R
清理项目 ⌘ + ⇧ + K
中止任务(编译/清理) ⌘ + .
</code></pre>
</div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/%E6%88%91%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%A0%E4%B8%AAXcode%E5%BF%AB%E6%8D%B7%E9%94%AE/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/%E6%8A%8AGAE%E7%A8%8B%E5%BA%8F%E9%80%9A%E8%BF%87SSH%E9%83%A8%E7%BD%B2%E5%88%B0VPS/" target="_self">把GAE程序通过SSH部署到VPS</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/%E6%8A%8AGAE%E7%A8%8B%E5%BA%8F%E9%80%9A%E8%BF%87SSH%E9%83%A8%E7%BD%B2%E5%88%B0VPS/" target="_self">
                <time class="text-uppercase">
                    January 14 2017
                </time>
            </a>
        </div>
        <div class="prism-content"><p>大部分在<a href="https://cloud.google.com/appengine/downloads">文档</a>上都写了, 写这篇文章的目的是发现现在<code>appcfg.py update xxxx</code>的时候会打开浏览器访问google请求授权(后台内建了一个本地server, 端口是<code>8090</code>, 授权成功后会带授权码请求本地的8090端口, 所以我们在 ssh 环境中是没有浏览器的, 该怎么解决呢?</p><p>我玩 linux 不多, 就以我的知识量这么解决:</p><ol>
<li>碰到需要访问网站的时候, 程序已经给出了提示, 要你退出, 你当然不退出, 而是把网址复制出来, 在本地打开, 授权成功后, 本地浏览器会请求<code>127.0.0.1:8090</code>, 当然, 什么都不会发生, 但从地址栏里把地址复制到剪贴板.</li>
<li>回到SSH, 把当前任务放到后台(<code>ctrl+z</code>)</li>
<li>用<code>curl</code>访问剪贴板里的地址</li>
<li>继续<code>ctrl+z</code>把<code>curl</code>请求放到后台</li>
<li><code>jobs</code>命令查一下, 如果后台没有别的任务的话, <code>appcfg</code>任务的id 应该是1, <code>curl</code>任务id 应该是2(现在以我的1和2为准)</li>
<li>把<code>appcfg</code>提到前台: <code>fg %1</code></li>
<li>你会看到程序顺利进行下去了</li>
<li>继续, <code>fg %2</code>把 curl 任务提到前台, 你会看到提示, 什么授权成功之类的</li>
</ol>
<p>演示:</p>
<pre><code>root@walker:~/KindleEar# appcfg.py update app.yaml module-worker.yaml
07:52 AM Host: appengine.google.com
07:52 AM Application: kindleearwalker; version: 1
07:52 AM Starting update of app: kindleearwalker, version: 1
07:52 AM Getting current resource limits.
Your browser has been opened to visit:

    https://accounts.google.com/o/oauth2/auth?scope=演示数据
    # step1: 请复制此网址, 并忽略要你退出换电脑的提示

If your browser is on a different machine then exit and re-run this
application with the command-line parameter

  --noauth_local_webserver

# step2: 现在开始把任务放到后台
^Z
[1]+  Stopped                 appcfg.py update app.yaml module-worker.yaml
# step3: 把从本机浏览器复制的回调 url 访问一下
root@walker:~/KindleEar# curl http://localhost:8090/?code=4/CYdQFQLiLBFwa7ajsU1acb1Xx9Kpal6SxMuPIS-dRYo#
# step4: 把访问任务放到后台
^Z
[2]+  Stopped                 curl http://localhost:8090/?code=4/CYdQFQLiLBFwa7ajsU1acb1Xx9Kpal6SxMuPIS-dRYo#
# step 5: 查看一下任务和 ID
root@walker:~/KindleEar# jobs
[1]-  Stopped                 appcfg.py update app.yaml module-worker.yaml
[2]+  Stopped                 curl http://localhost:8090/?code=4/xxxxx#
# step 6: 把appcgf的任务提到前台
root@walker:~/KindleEar# fg %1
appcfg.py update app.yaml module-worker.yaml
Authentication successful.
07:54 AM Scanning files on local disk.
07:54 AM Cloning 15 static files.
07:54 AM Cloning 387 application files.
07:54 AM Uploading 3 files and blobs.
07:54 AM Uploaded 3 files and blobs.
.........省略
07:54 AM Compilation completed.
07:54 AM Starting deployment.
07:54 AM Checking if deployment succeeded.
07:54 AM Deployment successful.
07:54 AM Checking if updated app version is serving.
07:54 AM Completed update of app: kindleearwalker, module: worker, version: 1
# step 7: see? 成功了, 看看剩下的任务吧
root@walker:~/KindleEar# jobs
[2]+  Stopped                 curl http://localhost:8090/?code=4/xxxxxxx#
# step 8: 提到前台来结束吧
root@walker:~/KindleEar# fg %2
curl http://localhost:8090/?code=4/CYdQFQLiLBFwa7ajsU1acb1Xx9Kpal6SxMuPIS-dRYo#
&lt;html&gt;&lt;head&gt;&lt;title&gt;Authentication Status&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;The authentication flow has completed.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;root@walker:~/KindleEar#
</code></pre>
</div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/%E6%8A%8AGAE%E7%A8%8B%E5%BA%8F%E9%80%9A%E8%BF%87SSH%E9%83%A8%E7%BD%B2%E5%88%B0VPS/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
    <article class="yue prism-post-item col-md-8 offset-md-2">
        <h1 class="prism-post-title"><a class="no-link" href="/archives/-bin-bash%E5%92%8C-bin-sh%E7%9A%84%E5%8C%BA%E5%88%AB/" target="_self">-bin-bash和-bin-sh的区别</a></h1>
        <div class="prism-post-time">
            <a class="no-link" href="/archives/-bin-bash%E5%92%8C-bin-sh%E7%9A%84%E5%8C%BA%E5%88%AB/" target="_self">
                <time class="text-uppercase">
                    March 26 2010
                </time>
            </a>
        </div>
        <div class="prism-content"><p>[该文不严谨, 文末有补充]</p><p>脚本test.sh内容：</p>
<pre><code>#!/bin/sh
source pcy.sh #pcy.sh并不存在
echo hello
</code></pre>
<p>执行./test.sh，屏幕输出为：</p>
<pre><code>./test.sh: line 2: pcy.sh: No such file or directory
</code></pre>
<p>由此可见，在<code>#!/bin/sh</code>的情况下，source不成功，<strong>不会运行</strong>source后面的代码。
修改test.sh脚本的第一行，变为<code>#!/bin/bash</code>，再次执行./test.sh，屏幕输出为：</p>
<pre><code>./test.sh: line 2: pcy.sh: No such file or directory
hello
</code></pre>
<p>由此可见，在<code>#!/bin/bash</code>的情况下，虽然source不成功，但是还是运行了source后面的echo语句。
但是紧接着我又试着运行了一下<code>sh ./test.sh</code>，这次屏幕输出为：</p>
<pre><code>./test.sh: line 2: pcy.sh: No such file or directory
</code></pre>
<p>表示虽然脚本中指定了#!/bin/bash，但是如果使用sh 方式运行，如果source不成功，也不会运行source后面的代码。</p><p>为什么会有这样的区别呢？</p><p>junru同学作了解释</p><ol>
<li>sh一般设成bash的软链</li>
</ol>

<pre><code>[work@zjm-testing-app46 cy]$ ll /bin/sh
lrwxrwxrwx 1 root root 4 Nov 13 2006 /bin/sh -&gt; bash
</code></pre>
<ol start="2">
<li>在一般的linux系统当中（如redhat），使用sh调用执行脚本相当于打开了bash的POSIX标准模式</li>
<li>也就是说 /bin/sh 相当于 /bin/bash --posix</li>
</ol>
<p>所以，sh跟bash的区别，实际上就是bash有没有开启posix模式的区别</p><p>so，可以预想的是，如果第一行写成 #!/bin/bash --posix，那么脚本执行效果跟#!/bin/sh是一样的（遵循posix的特定规范，有可能就包括这样的规范：“当某行代码出错时，不继续往下解释”）</p><p>来源: <a href="http://www.cnblogs.com/baizhantang/archive/2012/09/11/2680453.html"><a href="http://www.cnblogs.com/baizhantang/archive/2012/09/11/2680453.html">http://www.cnblogs.com/baizhantang/archive/2012/09/11/2680453.html</a></a></p><h1>其它解释</h1>
<p>等等,  这里就完了吗? 这里有更明确的说法</p><p>在<code>CentOS</code>里，/bin/sh是一个指向/bin/bash的符号链接: (只是在 CentOS 里哦)</p>
<pre><code>[root@centosraw ~]# ls -l /bin/*sh
-rwxr-xr-x. 1 root root 903272 Feb 22 05:09 /bin/bash
-rwxr-xr-x. 1 root root 106216 Oct 17  2012 /bin/dash
lrwxrwxrwx. 1 root root      4 Mar 22 10:22 /bin/sh -&gt; bash
</code></pre>
<p><strong>但在Mac OS上不是</strong>，/bin/sh和/bin/bash是两个<strong>不同</strong>的文件，尽管它们的大小只相差100字节左右:</p>
<pre><code>iMac:~ wuxiao$ ls -l /bin/*sh
-r-xr-xr-x  1 root  wheel  1371648  6 Nov 16:52 /bin/bash
-rwxr-xr-x  2 root  wheel   772992  6 Nov 16:52 /bin/csh
-r-xr-xr-x  1 root  wheel  2180736  6 Nov 16:52 /bin/ksh
-r-xr-xr-x  1 root  wheel  1371712  6 Nov 16:52 /bin/sh
-rwxr-xr-x  2 root  wheel   772992  6 Nov 16:52 /bin/tcsh
-rwxr-xr-x  1 root  wheel  1103984  6 Nov 16:52 /bin/zsh
</code></pre>
<p>来源: <a href="https://github.com/qinjx/30min_guides/blob/master/shell.md"><a href="https://github.com/qinjx/30min_guides/blob/master/shell.md">https://github.com/qinjx/30min_guides/blob/master/shell.md</a></a></p></div>
        
        <div class="prism-action-bar">
            <div class="comment-action action-item"><a class="no-link text-uppercase" href="/archives/-bin-bash%E5%92%8C-bin-sh%E7%9A%84%E5%8C%BA%E5%88%AB/#prism__comment" target="_self"><i class="fa fa-comment"></i>Comment</a></div>
        </div>
        
    </article>
    
</section>

<div class="container">
    <section id="prism__page__pagination" class="prism-pagination" class="col-md-8 offset-md-2">
        <ul>
            
            <li class="next">
                <a class="no-link" href="/page/8/" target="_self"><i class="fa fa-chevron-left" aria-hidden="true"></i>Newer</a>
            </li>
            
            
            <li class="prev text-muted">
                <span title="Viewing the last page.">Older<i class="fa fa-chevron-right" aria-hidden="true"></i></span>
            </li>
            
        </ul>
    </section>
</div>


</main>

            <footer id="prism__footer">
                <section>
                    <div>
                        <nav class="social-links">
                            <ul><li><a class="no-link" title="Twitter" href="https://twitter.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-twitter"></i></a></li><li><a class="no-link" title="GitHub" href="https://github.com/walkerwzy" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-github"></i></a></li><li><a class="no-link" title="Weibo" href="https://weibo.com/1071696872" target="_blank" rel="noopener noreferrer nofollow"><i class="gi gi-weibo"></i></a></li></ul>
                        </nav>
                    </div>

                    <section id="prism__external_links">
                        <ul>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://github.com/AlanDecode/Maverick" rel="noopener noreferrer nofollow">Maverick</a>：🏄‍ Go My Own Way.
                                <span>|</span>
                            </li>
                            
                            <li>
                                <a class="no-link" target="_blank" href="https://www.imalan.cn" rel="noopener noreferrer nofollow">Triple NULL</a>：Home page for AlanDecode.
                                <span>|</span>
                            </li>
                            
                        </ul>
                    </section>

                    <div class="copyright">
                        <p class="copyright-text">
                            <span class="brand">walker's code blog</span>
                            <span>Copyright © 2022 walker</span>
                        </p>
                        <p class="copyright-text powered-by">
                            | Powered by <a href="https://github.com/AlanDecode/Maverick" class="no-link" target="_blank" rel="noopener noreferrer nofollow">Maverick</a> | Theme <a href="https://github.com/Reedo0910/Maverick-Theme-Prism" target="_blank" class="no-link" rel="noopener noreferrer nofollow">Prism</a>
                        </p>
                    </div>
                    <div class="footer-addon">
                        
                    </div>
                </section>
                <script>
                    var site_build_date = "2019-12-06T12:00+08:00"

                </script>
                <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/prism-efa8685153.js"></script>
            </footer>
        </div>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/ExSearch/ExSearch-493cb9cd89.js"></script>

    <!--katex-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/katex.min.js"></script>
    <script>
        mathOpts = {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "\\[", right: "\\]", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false }
            ]
        };

    </script>
    <script defer src="https://cdn.jsdelivr.net/gh/wzywalker/wzywalker.github.io@main/assets/auto-render.min.js" onload="renderMathInElement(document.body, mathOpts);"></script>

    
</body>

</html>